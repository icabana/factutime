<?phpclass RecibosModel extends ModelBase {              function getTodosRecibos() {     $query = "select   fac_recibos.ID_RECIBO,                         fac_recibos.CLIENTE_RECIBO,                        fac_recibos.CONSECUTIVO_RECIBO,                        fac_recibos.FECHA_RECIBO,                        fac_recibos.VALOR_RECIBO,                        fac_recibos.FORMAPAGO_RECIBO,                        fac_recibos.VENDEDOR_RECIBO,                        fac_recibos.NUMTRANSACCION_RECIBO,                        fac_recibos.CONCEPTO_RECIBO,                        fac_recibos.OBSERVACIONES_RECIBO,                        fac_recibos.CAJERO_RECIBO,                        tbl_estudiantes.NOMBRES_ESTUDIANTE,                                        tbl_estudiantes.APELLIDOS_ESTUDIANTE,                        tbl_estudiantes.DOCUMENTO_ESTUDIANTE,                        tbl_estudiantes.DIRECCION_ESTUDIANTE,                        tbl_estudiantes.TELEFONO_ESTUDIANTE,                        tbl_estudiantes.CIUDAD_ESTUDIANTE                        from fac_recibos left join tbl_estudiantes ON fac_recibos.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos.CONSECUTIVO_RECIBO != ''" ;                $consulta = $this->consulta($query);               return $consulta;                          }                function getRecibosEntreFechas($FECHA1, $FECHA2) {     $query = "select   fac_recibos.ID_RECIBO,                         fac_recibos.CLIENTE_RECIBO,                        fac_recibos.CONSECUTIVO_RECIBO,                        fac_recibos.FECHA_RECIBO,                        fac_recibos.VALOR_RECIBO,                        fac_recibos.VENDEDOR_RECIBO,                        fac_recibos.FORMAPAGO_RECIBO,                        fac_recibos.NUMTRANSACCION_RECIBO,                        fac_recibos.CONCEPTO_RECIBO,                        fac_recibos.OBSERVACIONES_RECIBO,                        fac_recibos.CAJERO_RECIBO,                        tbl_estudiantes.ID_ESTUDIANTE,                                        tbl_estudiantes.NOMBRES_ESTUDIANTE,                                        tbl_estudiantes.APELLIDOS_ESTUDIANTE,                        tbl_estudiantes.DOCUMENTO_ESTUDIANTE,                        tbl_estudiantes.DIRECCION_ESTUDIANTE,                        tbl_estudiantes.TELEFONO_ESTUDIANTE,                        tbl_estudiantes.CIUDAD_ESTUDIANTE                        from fac_recibos left join tbl_estudiantes ON fac_recibos.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos.CONSECUTIVO_RECIBO != '' AND fac_recibos.FECHA_RECIBO BETWEEN '".$FECHA1."' and '".$FECHA2."'"             . ""             . ""             . "UNION                 select   fac_recibos2.ID_RECIBO,                         fac_recibos2.CLIENTE_RECIBO,                        fac_recibos2.CONSECUTIVO_RECIBO,                        fac_recibos2.FECHA_RECIBO,                        fac_recibos2.VALOR_RECIBO,                        fac_recibos2.VENDEDOR_RECIBO,                        fac_recibos2.FORMAPAGO_RECIBO,                        fac_recibos2.NUMTRANSACCION_RECIBO,                        fac_recibos2.CONCEPTO_RECIBO,                        fac_recibos2.OBSERVACIONES_RECIBO,                        fac_recibos2.CAJERO_RECIBO,                        tbl_estudiantes.ID_ESTUDIANTE,                              tbl_estudiantes.NOMBRES_ESTUDIANTE,                                        tbl_estudiantes.APELLIDOS_ESTUDIANTE,                        tbl_estudiantes.DOCUMENTO_ESTUDIANTE,                        tbl_estudiantes.DIRECCION_ESTUDIANTE,                        tbl_estudiantes.TELEFONO_ESTUDIANTE,                        tbl_estudiantes.CIUDAD_ESTUDIANTE                        from fac_recibos2 left join tbl_estudiantes ON fac_recibos2.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos2.CONSECUTIVO_RECIBO != '' AND fac_recibos2.FECHA_RECIBO BETWEEN '".$FECHA1."' and '".$FECHA2."'" ;                $consulta = $this->consulta($query);               return $consulta;                          }                function getTotalIngresosPorMes($MES) {     $query = "select   sum(fac_recibos.VALOR_RECIBO) as total                        from fac_recibos                         where substr(fac_recibos.FECHA_RECIBO, 6, 2) = ".$MES ;                $consulta = $this->consulta($query);                               return $consulta[0]['total'];                          }                    function getRecibosPorCliente($CLIENTE_RECIBO) {     $query = "select   fac_recibos.ID_RECIBO,                         fac_recibos.CLIENTE_RECIBO,                        fac_recibos.CONSECUTIVO_RECIBO,                        fac_recibos.FECHA_RECIBO,                        fac_recibos.VALOR_RECIBO,                        fac_recibos.FORMAPAGO_RECIBO,                        fac_recibos.NUMTRANSACCION_RECIBO,                        fac_recibos.VENDEDOR_RECIBO,                        fac_recibos.CONCEPTO_RECIBO,                        fac_recibos.OBSERVACIONES_RECIBO,                        fac_recibos.CAJERO_RECIBO,                        tbl_estudiantes.NOMBRES_ESTUDIANTE,                                        tbl_estudiantes.APELLIDOS_ESTUDIANTE,                        tbl_estudiantes.DOCUMENTO_ESTUDIANTE,                        tbl_estudiantes.DIRECCION_ESTUDIANTE,                        tbl_estudiantes.TELEFONO_ESTUDIANTE,                        tbl_estudiantes.CIUDAD_ESTUDIANTE                        from fac_recibos left join tbl_estudiantes ON fac_recibos.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos.CONSECUTIVO_RECIBO != '' and fac_recibos.CLIENTE_RECIBO = '".$CLIENTE_RECIBO."'" ;                $consulta = $this->consulta($query);               return $consulta;                          }      function getDatosRecibo($ID_RECIBO) {     $query = "select   fac_recibos.ID_RECIBO,                         fac_recibos.CLIENTE_RECIBO,                        fac_recibos.CONSECUTIVO_RECIBO,                        fac_recibos.FECHA_RECIBO,                        fac_recibos.VALOR_RECIBO,                        fac_recibos.VENDEDOR_RECIBO,                        fac_recibos.VENDEDOR_RECIBO,                        fac_recibos.FORMAPAGO_RECIBO,                        fac_recibos.NUMTRANSACCION_RECIBO,                        fac_recibos.CONCEPTO_RECIBO,                        fac_recibos.OBSERVACIONES_RECIBO,                        fac_recibos.CAJERO_RECIBO,                        tbl_estudiantes.ID_ESTUDIANTE,                                        tbl_estudiantes.NOMBRES_ESTUDIANTE,                                        tbl_estudiantes.APELLIDOS_ESTUDIANTE,                        tbl_estudiantes.DOCUMENTO_ESTUDIANTE,                        tbl_estudiantes.DIRECCION_ESTUDIANTE,                        tbl_estudiantes.TELEFONO_ESTUDIANTE,                        tbl_estudiantes.CELULAR_ESTUDIANTE,                        tbl_estudiantes.CORREO_ESTUDIANTE,                        tbl_estudiantes.CIUDAD_ESTUDIANTE                        from fac_recibos left join tbl_estudiantes ON fac_recibos.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos.ID_RECIBO = '".$ID_RECIBO."'";                 $consulta = $this->consulta($query);        return $consulta[0];                }        function getDatosRecibo2($FECHA_RECIBO, $CAJERO_RECIBO, $NUMTRANSACCION_RECIBO) {            $query = "select   fac_recibos.ID_RECIBO                        from fac_recibos left join tbl_estudiantes ON fac_recibos.CLIENTE_RECIBO = tbl_estudiantes.ID_ESTUDIANTE                          where fac_recibos.FECHA_RECIBO = '".$FECHA_RECIBO."' AND  fac_recibos.NUMTRANSACCION_RECIBO = '".$NUMTRANSACCION_RECIBO."' AND  fac_recibos.CAJERO_RECIBO = '".$CAJERO_RECIBO."'";                 $consulta = $this->consulta($query);        return $consulta[0]['ID_RECIBO'];                }        function insertarRecibo($TIPO_RECIBO) {                        $query = "INSERT INTO fac_recibos (FECHA_RECIBO, TIPO_RECIBO)		VALUES('".  date("Y-m-d")."', '".$TIPO_RECIBO."');";               return $this->crear_ultimo_id($query);                   }                function guardarRecibo($FECHA_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $FORMAPAGO_RECIBO, $NUMTRANSACCION_RECIBO, $VALOR_RECIBO, $CONCEPTO_RECIBO, $OBSERVACIONES_RECIBO, $CONSECUTIVO_RECIBO, $CAJERO_RECIBO) {              $query = "INSERT fac_recibos(FECHA_RECIBO, CLIENTE_RECIBO, VENDEDOR_RECIBO, FORMAPAGO_RECIBO, NUMTRANSACCION_RECIBO, VALOR_RECIBO, CONCEPTO_RECIBO, OBSERVACIONES_RECIBO, CONSECUTIVO_RECIBO, CAJERO_RECIBO) VALUES('".$FECHA_RECIBO."','".$CLIENTE_RECIBO."', '".utf8_decode($VENDEDOR_RECIBO)."', '".utf8_decode($FORMAPAGO_RECIBO)."', '".$NUMTRANSACCION_RECIBO."', '".$VALOR_RECIBO."', '".utf8_decode($CONCEPTO_RECIBO)."', '".utf8_decode($OBSERVACIONES_RECIBO)."', '".$CONSECUTIVO_RECIBO."', '".utf8_decode($CAJERO_RECIBO)."');";       return $this->crear_ultimo_id($query);    }        function editarRecibo($ID_RECIBO, $FECHA_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $FORMAPAGO_RECIBO, $NUMTRANSACCION_RECIBO, $VALOR_RECIBO, $CONCEPTO_RECIBO, $OBSERVACIONES_RECIBO, $CAJERO_RECIBO) {       $query = "UPDATE fac_recibos  SET FECHA_RECIBO = '".utf8_decode($FECHA_RECIBO)."', CLIENTE_RECIBO = '".$CLIENTE_RECIBO."', VENDEDOR_RECIBO = '".utf8_decode($VENDEDOR_RECIBO)."', FORMAPAGO_RECIBO = '".$FORMAPAGO_RECIBO."', NUMTRANSACCION_RECIBO = '".$NUMTRANSACCION_RECIBO."', VALOR_RECIBO = '".$VALOR_RECIBO."', CONCEPTO_RECIBO = '".utf8_decode($CONCEPTO_RECIBO)."', OBSERVACIONES_RECIBO = '".utf8_decode($OBSERVACIONES_RECIBO)."', CAJERO_RECIBO = '".utf8_decode($CAJERO_RECIBO)."'        WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }                        function editarValoresFacPedCot($ID_RECIBO, $SUBTOTAL_RECIBO, $DESCUENTO_RECIBO, $IMPUESTO19_RECIBO, $IMPUESTO5_RECIBO, $TOTAL_RECIBO) {               $query = "UPDATE fac_recibos  SET SUBTOTAL_RECIBO = '".utf8_decode($SUBTOTAL_RECIBO)."', DESCUENTO_RECIBO = '".utf8_decode($DESCUENTO_RECIBO)."', IMPUESTO19_RECIBO = '".utf8_decode($IMPUESTO19_RECIBO)."', IMPUESTO5_RECIBO = '".utf8_decode($IMPUESTO5_RECIBO)."', TOTAL_RECIBO = '".utf8_decode($TOTAL_RECIBO)."'                   WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }                    function editarPedido($ID_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $TERMINO_RECIBO, $SUBTOTAL_RECIBO, $DESCUENTO_RECIBO, $IMPUESTO19_RECIBO, $IMPUESTO5_RECIBO, $TOTAL_RECIBO, $DESCRIPCION_RECIBO, $FECHA_RECIBO, $VENCIMIENTO_RECIBO, $CONSECUTIVO2_RECIBO) {               $query = "UPDATE fac_recibos  SET CLIENTE_RECIBO = '".utf8_decode($CLIENTE_RECIBO)."', VENDEDOR_RECIBO = '".utf8_decode($VENDEDOR_RECIBO)."', TERMINO_RECIBO = '".utf8_decode($TERMINO_RECIBO)."', SUBTOTAL_RECIBO = '".utf8_decode($SUBTOTAL_RECIBO)."', DESCUENTO_RECIBO = '".utf8_decode($DESCUENTO_RECIBO)."', IMPUESTO19_RECIBO = '".utf8_decode($IMPUESTO19_RECIBO)."', IMPUESTO5_RECIBO = '".utf8_decode($IMPUESTO5_RECIBO)."', TOTAL_RECIBO = '".utf8_decode($TOTAL_RECIBO)."', DESCRIPCION_RECIBO = '".utf8_decode($DESCRIPCION_RECIBO)."', CONSECUTIVO2_RECIBO = '".$CONSECUTIVO2_RECIBO."', FECHA_RECIBO = '".$FECHA_RECIBO."', VENCIMIENTO_RECIBO = '".$VENCIMIENTO_RECIBO."'                   WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }                    function editarCotizacion($ID_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $TERMINO_RECIBO, $SUBTOTAL_RECIBO, $DESCUENTO_RECIBO, $IMPUESTO19_RECIBO, $IMPUESTO5_RECIBO, $TOTAL_RECIBO, $DESCRIPCION_RECIBO, $FECHA_RECIBO, $VENCIMIENTO_RECIBO, $CONSECUTIVO3_RECIBO) {               $query = "UPDATE fac_recibos  SET CLIENTE_RECIBO = '".utf8_decode($CLIENTE_RECIBO)."', VENDEDOR_RECIBO = '".utf8_decode($VENDEDOR_RECIBO)."', TERMINO_RECIBO = '".utf8_decode($TERMINO_RECIBO)."', SUBTOTAL_RECIBO = '".utf8_decode($SUBTOTAL_RECIBO)."', DESCUENTO_RECIBO = '".utf8_decode($DESCUENTO_RECIBO)."', IMPUESTO19_RECIBO = '".utf8_decode($IMPUESTO19_RECIBO)."', IMPUESTO5_RECIBO = '".utf8_decode($IMPUESTO5_RECIBO)."', TOTAL_RECIBO = '".utf8_decode($TOTAL_RECIBO)."', DESCRIPCION_RECIBO = '".utf8_decode($DESCRIPCION_RECIBO)."', CONSECUTIVO3_RECIBO = '".$CONSECUTIVO3_RECIBO."', FECHA_RECIBO = '".$FECHA_RECIBO."', VENCIMIENTO_RECIBO = '".$VENCIMIENTO_RECIBO."'                   WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }        function editarDevolucion($ID_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $TERMINO_RECIBO, $SUBTOTAL_RECIBO, $DESCUENTO_RECIBO, $IMPUESTO19_RECIBO, $IMPUESTO5_RECIBO, $TOTAL_RECIBO, $DESCRIPCION_RECIBO, $FECHA_RECIBO, $VENCIMIENTO_RECIBO, $CONSECUTIVO4_RECIBO) {               $query = "UPDATE fac_recibos  SET CLIENTE_RECIBO = '".utf8_decode($CLIENTE_RECIBO)."', VENDEDOR_RECIBO = '".utf8_decode($VENDEDOR_RECIBO)."', TERMINO_RECIBO = '".utf8_decode($TERMINO_RECIBO)."', SUBTOTAL_RECIBO = '".utf8_decode($SUBTOTAL_RECIBO)."', DESCUENTO_RECIBO = '".utf8_decode($DESCUENTO_RECIBO)."', IMPUESTO19_RECIBO = '".utf8_decode($IMPUESTO19_RECIBO)."', IMPUESTO5_RECIBO = '".utf8_decode($IMPUESTO5_RECIBO)."', TOTAL_RECIBO = '".utf8_decode($TOTAL_RECIBO)."', DESCRIPCION_RECIBO = '".utf8_decode($DESCRIPCION_RECIBO)."', CONSECUTIVO4_RECIBO = '".$CONSECUTIVO4_RECIBO."', FECHA_RECIBO = '".$FECHA_RECIBO."', VENCIMIENTO_RECIBO = '".$VENCIMIENTO_RECIBO."'                   WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }                function editarFacPedCot($ID_RECIBO, $CLIENTE_RECIBO, $VENDEDOR_RECIBO, $TERMINO_RECIBO, $DESCRIPCION_RECIBO, $FECHA_RECIBO, $VENCIMIENTO_RECIBO) {               $query = "UPDATE fac_recibos  SET CLIENTE_RECIBO = '".utf8_decode($CLIENTE_RECIBO)."', VENDEDOR_RECIBO = '".utf8_decode($VENDEDOR_RECIBO)."', TERMINO_RECIBO = '".utf8_decode($TERMINO_RECIBO)."', DESCRIPCION_RECIBO = '".utf8_decode($DESCRIPCION_RECIBO)."', FECHA_RECIBO = '".$FECHA_RECIBO."', VENCIMIENTO_RECIBO = '".$VENCIMIENTO_RECIBO."'                   WHERE ID_RECIBO = '" . $ID_RECIBO . "'";              return $this->modificarRegistros($query);           }                function eliminarRecibo($ID_RECIBO) {        $query = "DELETE FROM fac_recibos WHERE ID_RECIBO = '". $ID_RECIBO ."'";        $this->modificarRegistros($query);    }                function insertarProducto($RECIBO_FACPRO, $PRODUCTO_FACPRO, $CANTIDAD_FACPRO, $PRECIOUNITARIO_FACPRO, $SUBTOTAL_FACPRO, $DESCUENTO_FACPRO, $IMPUESTO_FACPRO, $TOTAL_FACPRO) {                        $query = "INSERT INTO fac_productos (RECIBO_FACPRO, PRODUCTO_FACPRO, CANTIDAD_FACPRO, PRECIOUNITARIO_FACPRO, SUBTOTAL_FACPRO, DESCUENTO_FACPRO, IMPUESTO_FACPRO, TOTAL_FACPRO)		VALUES('".$RECIBO_FACPRO."','".$PRODUCTO_FACPRO."','".$CANTIDAD_FACPRO."','".$PRECIOUNITARIO_FACPRO."','".$SUBTOTAL_FACPRO."','".$DESCUENTO_FACPRO."','".$IMPUESTO_FACPRO."','".$TOTAL_FACPRO."');";               return $this->crear_ultimo_id($query);                   }                    //////////                function getProductosPorRecibo($RECIBO_FACPRO) {             $query = "select 	                fac_productos.ID_FACPRO,                fac_productos.RECIBO_FACPRO,                fac_productos.PRODUCTO_FACPRO,                fac_productos.CANTIDAD_FACPRO,                fac_productos.PRECIOUNITARIO_FACPRO,                fac_productos.DESCUENTO_FACPRO,                fac_productos.IMPUESTO_FACPRO,                fac_productos.SUBTOTAL_FACPRO,                fac_productos.TOTAL_FACPRO,		fac_recibos.ID_RECIBO,                 fac_recibos.CLIENTE_RECIBO,                fac_recibos.CONSECUTIVO_RECIBO,                fac_recibos.CONSECUTIVO2_RECIBO,                fac_recibos.CONSECUTIVO3_RECIBO,                fac_recibos.TIPO_RECIBO,                fac_recibos.FECHA_RECIBO,                fac_recibos.VENDEDOR_RECIBO,                fac_recibos.TERMINO_RECIBO,                fac_recibos.SUBTOTAL_RECIBO,                fac_recibos.DESCUENTO_RECIBO,                                fac_recibos.IMPUESTO5_RECIBO,                fac_recibos.IMPUESTO19_RECIBO,                fac_recibos.TOTAL_RECIBO,                fac_recibos.DESCRIPCION_RECIBO,                                pro_productos.ID_PRODUCTO,                 pro_productos.CODIGO_PRODUCTO,                pro_productos.NOMBRE_PRODUCTO,                pro_productos.INICIAL_PRODUCTO,                pro_productos.ACTUAL_PRODUCTO                                from fac_productos left join fac_recibos ON fac_productos.RECIBO_FACPRO = fac_recibos.ID_RECIBO                                left join pro_productos ON fac_productos.PRODUCTO_FACPRO = pro_productos.ID_PRODUCTO                                    WHERE fac_productos.RECIBO_FACPRO = '".$RECIBO_FACPRO."'" ;                        $consulta = $this->consulta($query);               return $consulta;                          }                  function getConsecutivo() {     $query = "select MAX(fac_recibos.CONSECUTIVO_RECIBO) as mayor                from fac_recibos";         $consulta = $this->consulta($query);        return $consulta[0]['mayor'];                }        function getConsecutivo2() {            $query = "select MAX(fac_recibos.CONSECUTIVO2_RECIBO) as mayor                                from fac_recibos";                 $consulta = $this->consulta($query);        return $consulta[0]['mayor'];                }        function getConsecutivo3() {            $query = "select MAX(fac_recibos.CONSECUTIVO3_RECIBO) as mayor                                from fac_recibos";                 $consulta = $this->consulta($query);        return $consulta[0]['mayor'];                }            function getConsecutivo4() {            $query = "select MAX(fac_recibos.CONSECUTIVO4_RECIBO) as mayor                                from fac_recibos";                 $consulta = $this->consulta($query);        return $consulta[0]['mayor'];                }            }?>