<?php           $this->pdf = new PdfReportes2('P', 'mm', 'Tickets');		    $this->pdf->SetCreator('ISMAEL CABANA');    $this->pdf->SetAuthor('ISMAEL CABANA');    $this->pdf->SetTitle('REPORTE DEL PRESUPUESTO DEL PROYECTO');    $this->pdf->SetSubject('PRESUPUESTO DEL PROYECTO.');    $this->pdf->AliasNbPages();    $this->pdf->SetTextColor(0,0,0);    $this->pdf->SetFillColor( 239, 239, 239 );  		    $anchos = array('5', '10', '25','35','45', '55', '65', '115', '30');    $this->pdf->SetMargins("7","7","7");    $this->pdf->AddPage();    $this->pdf->SetFont('Arial','B',6);                        $contador = 1;            $this->pdf->SetFont('Arial','',10);    $this->pdf->ln();$this->pdf->ln();    $params = Parametros::singleton();       $this->pdf->SetFont('Arial','',8);     $this->pdf->Cell(0, 4, utf8_decode("**********************************************************"),0,1, 'C');    $this->pdf->SetFont('Arial','',12);        $this->pdf->Cell(0, 4, utf8_decode("Corporación Educativa "),0,1, 'C');       $this->pdf->Cell(0, 4, utf8_decode("Asesorias del Norte"),0,1, 'C');    $this->pdf->SetFont('Arial','',8);     $this->pdf->Cell(0, 4, utf8_decode("**********************************************************"),0,1, 'C');     $this->pdf->SetFont('Arial','',8);     $this->pdf->Cell(0, 3, $params->valor('NITEMPRESA'),0,1);                 $this->pdf->Cell(0, 3, $params->valor('DIREMPRESA'),0,1);             $this->pdf->Cell(0, 3, trim($params->valor('TELEFEMPRESA')),0,1);             $this->pdf->Cell(0, 3, $params->valor('CORREOEMPRESA'),0,1);                $this->pdf->ln();                       $consecutivo = "";             for($i = strlen($factura['CONSECUTIVO_FACTURA']); $i<10 ; $i++){                $consecutivo .= "0";                                    }                             $consecutivo.= "".$factura['CONSECUTIVO_FACTURA'];         $this->pdf->Cell(0, 4, "Factura No. ".$consecutivo." - Fecha: ".$factura['FECHA_FACTURA'],0,1);               $this->pdf->ln();    $this->pdf->Cell(0, 3, utf8_decode('Señor(a): '),0,1, 'C');           $this->pdf->SetFont('Arial','',7);       $this->pdf->Cell(0, 4, $factura['NOMBRES_ESTUDIANTE']." ".$factura['APELLIDOS_ESTUDIANTE'],0,1, 'C');           $this->pdf->Cell(0, 4, "Documento: (".number_format($factura['DOCUMENTO_ESTUDIANTE'],0,',','.').")",0,1, 'C');         $this->pdf->SetFont('Arial','',7);$this->pdf->ln(); $this->pdf->Cell(0, 3, "/-------------------------------------------------------------------------\\",0,1, 'C');  $this->pdf->Cell(0, 3, "Nombre                                                    Total",0,1, 'C'); $this->pdf->Cell(0, 3, "/-------------------------------------------------------------------------\\",0,1, 'C');        foreach ($productos as $producto){                         $this->pdf->Cell(50, 4, substr($producto['NOMBRE_PRODUCTO'],0,40),0,0);             $this->pdf->Cell(50, 4, "$".number_format($producto['TOTAL_FACPRO'],0,',','.'),0,1);               }          $this->pdf->Cell(0, 3, "/-------------------------------------------------------------------------\\",0,1, 'C');           $this->pdf->ln();        $this->pdf->SetFont('Arial','',7);           $this->pdf->MultiCell(0, 4, "TOTAL FACTURA: $".number_format($factura['TOTAL_FACTURA'],0,',','.')."",0,1);                             $fechas = new Fechas();            $valor_cuota = 0;        $sumas_cuotas = 0;                    $valor_cuota = $factura['TOTAL_FACTURA']/$factura['TERMINO_FACTURA'];            $conta = 1;                 $j = 0;        for ($i=1; $i<=$factura['TERMINO_FACTURA']; $i++) {             if($datos_factura['TIPOPAGO_FACTURA'] == "MENSUAL"){                    $proxima_fecha = $fechas->sumarmeses2($datos_factura['FECHA2_FACTURA'], $i);            }else{                $j += 14;                                $proxima_fecha = $fechas->sumardias2($datos_factura['FECHA2_FACTURA'], $j);            }            $sumas_cuotas += $valor_cuota;                        if($estado_factura == "PAGADA"){                                        }else{                                $lo_que_se_a_pagado = $factura['TOTAL_FACTURA'] - $saldo_factura;                                 if($sumas_cuotas <= $lo_que_se_a_pagado){                                                     }else{                                                                  $a_pagar = $sumas_cuotas - $lo_que_se_a_pagado;                                                  if($a_pagar > $valor_cuota){                             $a_pagar = $valor_cuota;                         }                                           }                            }                                    if($conta % 2 == 0){                /////$this->pdf->ln();            }                        $conta++;                    }                                $this->pdf->SetFont('Arial','',7);                 $total_en_letras1 = $this->convertir($lo_que_se_a_pagado);                $total_en_letras2 = $this->convertir($sumas_cuotas-$lo_que_se_a_pagado);                         $this->pdf->MultiCell(0, 4, "TOTAL PAGADO: $".number_format($lo_que_se_a_pagado,0,',','.')."",0,1);          $this->pdf->MultiCell(0, 4, "SALDO PENDIENTE: $".number_format($sumas_cuotas-$lo_que_se_a_pagado,0,',','.')."",0,1);                  /*      $this->pdf->MultiCell(0, 4, "Total Pagado: $(".number_format($lo_que_se_a_pagado,0,',','.').") Valor en letras: ".$total_en_letras1." pesos",0,1);       $this->pdf->MultiCell(0, 4, "Saldo Pendiente: $(".number_format($sumas_cuotas-$lo_que_se_a_pagado,0,',','.').") Valor en letras: ".$total_en_letras2." pesos",0,1);       */  $this->pdf->ln();  $this->pdf->ln();  $this->pdf->ln();      $this->pdf->SetFont('Arial','',7);           $this->pdf->MultiCell(0, 4, utf8_decode("Impreso por: Corporación Educativa Asesorías del Norte    -     ").$params->valor('NITEMPRESA'),0,1);       $this->pdf->MultiCell(0, 4, "--------------------------------------------------------------------------",0,1);     ?>